========================================
MANUAL REZVO DEPLOYMENT
========================================

# 1. Install required packages
apt update
apt install -y git python3.11 python3.11-venv python3-pip nodejs npm nginx curl gnupg

# 2. Install MongoDB
curl -fsSL https://www.mongodb.org/static/pgp/server-7.0.asc | gpg --dearmor -o /usr/share/keyrings/mongodb-server-7.0.gpg
echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse" | tee /etc/apt/sources.list.d/mongodb-org-7.0.list
apt update
apt install -y mongodb-org
systemctl start mongod
systemctl enable mongod

# 3. Clone Rezvo
cd /var/www
git clone https://github.com/Ambassadorbtc/Rezvo.git rezvo
cd rezvo

# 4. Setup Backend
cd backend
python3.11 -m venv venv
venv/bin/pip install --upgrade pip
venv/bin/pip install -r requirements.txt

# 5. Create .env file
cp ../.env.example .env
nano .env
# Edit and save (Ctrl+X, Y, Enter)

# 6. Setup Frontend
cd ../frontend
npm install
npm run build

# 7. Configure Nginx
cp ../nginx.conf /etc/nginx/sites-available/rezvo
ln -sf /etc/nginx/sites-available/rezvo /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default
nginx -t

# 8. Create systemd service
cat > /etc/systemd/system/rezvo-backend.service <<'EOF'
[Unit]
Description=Rezvo Backend API
After=network.target mongod.service

[Service]
Type=simple
User=root
WorkingDirectory=/var/www/rezvo/backend
Environment="PATH=/var/www/rezvo/backend/venv/bin"
ExecStart=/var/www/rezvo/backend/venv/bin/python server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# 9. Start services
systemctl daemon-reload
systemctl enable rezvo-backend
systemctl start rezvo-backend
systemctl restart nginx

# 10. Check status
systemctl status rezvo-backend
systemctl status nginx
curl http://localhost:8000/health

========================================
